plugins {
    id 'application'
    id 'java'
    id "com.github.johnrengelman.shadow" version "4.0.3"
}

group 'ABAP2JCo'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'log4j', name: 'log4j', version: '1.2.17'
    compile group: 'org.glassfish.jersey.core', name: 'jersey-common', version: '2.23.2'
    compile group: 'javax.ws.rs', name: 'javax.ws.rs-api', version: '2.0'
    compile group: 'org.glassfish', name: 'javax.el', version: '3.0.0'
    compile files('sapjco3-darwinintel64-3.0.18/sapjco3.jar')

    testCompile group: 'junit', name: 'junit', version: '4.12'
}

// Include dependent libraries in archive.
//mainClassName = "ABAP2JCo.SampleAbapConnectorServer"

jar {
    manifest {
        attributes "Main-Class": "SampleAbapConnectorServer"
    }
//    from {
//        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
//    }
}

task copyToLib(type: Copy) {
    into "$buildDir/output/lib"
    from configurations.runtime
}

run {
    mainClassName = "SampleAbapConnectorServer"
}
